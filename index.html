<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
  <script src="script/Chroma.js"></script>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src="script/jquery.js"></script>
    <script type="text/javascript">
    var ipc = require('electron').ipcRenderer;
    var fs = require('fs');

    var folder;


    var leftcolor = 0;
    var rightcolor = 0;
    var updating2 = false;
    var updating = false;
    var chromaSDK = undefined;
    var ingame = false;
    var updating3 = false;
    var key = new Array(22);
    function onPageLoad() {
      chromaSDK = new ChromaSDK();
      var oReq = new XMLHttpRequest();
        oReq.timeout = 2000; // time in milliseconds
        oReq.addEventListener("load", function() {
          console.log('ChromaSDK Version:', this.responseText);
          var jsonVersion = JSON.parse(this.responseText);
          if (jsonVersion != undefined &&
            jsonVersion.version != undefined) {
            var parts = jsonVersion.version.split(".");
            if (parts.length >= 3 &&
              ((parts[0] > 2) ||
              (parts[0] == 2 && parts[1] > 14) ||
              (parts[0] == 2 && parts[1] == 14 && parts[2] >= 0))) {
                chromaSDK.init();
              } else {
                $("#divUpdateChromaSDK").show();
              }
          }
        });
        oReq.ontimeout = function() {
          console.log('ontimeout');
        };
        oReq.onerror = function() {
          console.log('onerror');
        };
        oReq.addEventListener(
          "readystatechange",
          function() {
            //console.log('readystatechange', this.status);
            if (this.readyState == 4) {
              if (this.status == 200) {
              }
            }
          }
          ,
          false
        );
        oReq.open("GET", "https://chromasdk.io:54236/razer/chromasdk");
        oReq.send();
      }
      function onPageUnload() {
        if (chromaSDK != undefined) {
          chromaSDK.uninit()
        }
      }

  function leftcolorfunction(i){
    var time = 20 * i;
      setTimeout(function() {
        var x = (i/10);
        var red = (Math.round(x * (piioleftcolor[0] - leftcolorold[0])) + leftcolorold[0]);
        var green = (Math.round(x * (piioleftcolor[1] - leftcolorold[1])) + leftcolorold[1]);
        var blue = (Math.round(x * (piioleftcolor[2] - leftcolorold[2])) + leftcolorold[2]);
        leftcolor = red + green * 256 + blue * 65536;
      }, time);
  }
  function rightcolorfunction(i){
    var time = 20 * i;
      setTimeout(function() {
        var x = (i/10);
        var red = (Math.round(x * (piiorightcolor[0] - rightcolorold[0])) + rightcolorold[0]);
        var green = (Math.round(x * (piiorightcolor[1] - rightcolorold[1])) + rightcolorold[1]);
        var blue = (Math.round(x * (piiorightcolor[2] - rightcolorold[2])) + rightcolorold[2]);
        rightcolor = red + green * 256 + blue * 65536;
      }, time);
  }
var middlecolor = [0, 0, 255]
var cyclingto = "red"

  setInterval(function(){
    if (updating == false) {

    if (cyclingto == "red") {
      middlecolor[0] = middlecolor[0] + 1;
      middlecolor[2] = middlecolor[2] - 1;
    if (middlecolor[2] == 0) {
      cyclingto = "green";
    }
  } else if (cyclingto == "green") {
      middlecolor[1] = middlecolor[1] + 1;
      middlecolor[0] = middlecolor[0] - 1;
      if (middlecolor[0] == 0) {
        cyclingto = "blue";
      }
} else if (cyclingto == "blue") {
    middlecolor[2] = middlecolor[2] + 1;
    middlecolor[1] = middlecolor[1] - 1;
    if (middlecolor[1] == 0) {
      cyclingto = "red";
    }
}
  var color = middlecolor[0] + middlecolor[1] * 256 + middlecolor[2] * 65536;
  setTimeout(function(){
  if (ingame == true) {
    var key = new Array(22);
    for (var i = 0; i < 7; i++) {
      key[i] = leftcolor;
    }
    for (var i = 7; i < 16; i++) {
      key[i] = color;
    }
    for (var i = 16; i < 22; i++) {
      key[i] = rightcolor;
    }
    chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [color, leftcolor, color, color, rightcolor]);
    chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key, key, key, key, key, key]);
    chromaSDK.createMouseEffect("CHROMA_STATIC", color);
  } else {
  var key = new Array(22);
  for (var i = 0; i < 22; i++) {
    key[i] = color;
  }
  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key, key, key, key, key, key]);
  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [color, color, color, color, color]);
  chromaSDK.createMouseEffect("CHROMA_STATIC", color);

}
}, 2);
}
}, 16);
  function playerdead(player){
    if (updating3 == false) {
    updating2 = true;
    setTimeout(function(){
      updating2 = false;

      if (player == 1) {
        var key1 = new Array(22);
        for (var i = 0; i < 7; i++) {
          key1[i] = leftcolor;
        }
        for (var i = 7; i < 16; i++) {
          key1[i] = 0x00;
        }
        for (var i = 16; i < 22; i++) {
          key1[i] = rightcolor;
        }

        var key2 = new Array(22);
        for (var i = 0; i < 7; i++) {
          key2[i] = leftcolor;
        }
        for (var i = 7; i < 16; i++) {
          key2[i] = rightcolor;
        }
        for (var i = 16; i < 22; i++) {
          key2[i] = rightcolor;
        }

        updating = true;
        setTimeout(function(){
        if (updating2 == false && updating3 == false){
          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [rightcolor, leftcolor, rightcolor, rightcolor, rightcolor]);
          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
          chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
          setTimeout(function(){
            if (updating2 == false && updating3 == false){
              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
              chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
              setTimeout(function(){
                if (updating2 == false && updating3 == false){
                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [rightcolor, leftcolor, rightcolor, rightcolor, rightcolor]);
                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                  chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                  setTimeout(function(){
                    if (updating2 == false && updating3 == false){
                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                      setTimeout(function(){
                        if (updating2 == false && updating3 == false){
                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [rightcolor, leftcolor, rightcolor, rightcolor, rightcolor]);
                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                          setTimeout(function(){
                            if (updating2 == false && updating3 == false){
                              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                              setTimeout(function(){
                                updating = false;

                              }, 200);
                              }
                            }, 200);
                          }
                        }, 200);
                      }
                    }, 200);
                  }
                }, 200);
              }
            }, 200);
          }
        }, 16);
        } else if (player == 2) {

          var key1 = new Array(22);
          for (var i = 0; i < 7; i++) {
            key1[i] = leftcolor;
          }
          for (var i = 7; i < 16; i++) {
            key1[i] = 0x00;
          }
          for (var i = 16; i < 22; i++) {
            key1[i] = rightcolor;
          }
          var key2 = new Array(22);
          for (var i = 0; i < 7; i++) {
            key2[i] = leftcolor;
          }
            for (var i = 7; i < 16; i++) {
              key2[i] = leftcolor;
            }
            for (var i = 16; i < 22; i++) {
              key2[i] = rightcolor;
            }
            updating = true;
            setTimeout(function(){
            if(updating2 == false && updating3 == false){
              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [leftcolor, leftcolor, leftcolor, leftcolor, rightcolor]);
              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
              chromaSDK.createMouseEffect("CHROMA_STATIC", leftcolor);
              setTimeout(function(){
                if(updating2 == false && updating3 == false){
                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                  chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                  setTimeout(function(){
                    if(updating2 == false && updating3 == false){
                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [leftcolor, leftcolor, leftcolor, leftcolor, rightcolor]);
                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", leftcolor);
                      setTimeout(function(){
                        if(updating2 == false && updating3 == false){
                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                          setTimeout(function(){
                            if(updating2 == false && updating3 == false){
                              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [leftcolor, leftcolor, leftcolor, leftcolor, rightcolor]);
                              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", leftcolor);
                              setTimeout(function(){
                                if(updating2 == false && updating3 == false){
                                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                  chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                  setTimeout(function(){
                                    updating = false;
                                  }, 200);
                                }
                              }, 200);
                            }
                          }, 200);
                        }
                      }, 200);
                    }
                  }, 200);
                }
              }, 200);
            }
          }, 16);
          }else {

            var key1 = new Array(22);
            for (var i = 0; i < 7; i++) {
              key1[i] = leftcolor;
            }
            for (var i = 7; i < 16; i++) {
              key1[i] = 0x00;
            }
            for (var i = 16; i < 22; i++) {
              key1[i] = rightcolor;
            }

            var key2 = new Array(22);
            for (var i = 0; i < 7; i++) {
              key2[i] = leftcolor;
            }
            for (var i = 7; i < 16; i++) {
              key2[i] = 0xff;
            }
            for (var i = 16; i < 22; i++) {
              key2[i] = rightcolor;
            }

            updating = true;
            setTimeout(function(){
            if(updating2 == false && updating3 == false){
              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [0xff, leftcolor, 8355711, 8355711, rightcolor]);
              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
              chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
              chromaSDK.createMouseEffect("CHROMA_STATIC", 8355711);
              setTimeout(function(){
                if(updating2 == false && updating3 == false){
                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                  chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                  chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                  setTimeout(function(){
                    if(updating2 == false && updating3 == false){
                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [0xff, leftcolor, 8355711, 8355711, rightcolor]);
                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", 8355711);
                      setTimeout(function(){
                        if(updating2 == false && updating3 == false){
                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                          setTimeout(function(){
                            if(updating2 == false && updating3 == false){
                              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [0xff, leftcolor, 8355711, 8355711, rightcolor]);
                              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", 8355711);
                              setTimeout(function(){
                                if(updating2 == false && updating3 == false){
                                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, leftcolor, 00, 00, rightcolor]);
                                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                  chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                                  chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                  setTimeout(function(){
                                    updating = false;
                                  }, 200);
                                }
                              }, 200);
                            }
                          }, 200);
                        }
                      }, 200);
                    }
                  }, 200);
                }
              }, 200);
            }
          }, 16)
          }
        }, 16);
        }

}

          function playerwon(player){
            updating3 = true;
            setTimeout(function(){
              updating2 = false;

              if (player == 1) {
                var key1 = new Array(22);
                for (var i = 0; i < 7; i++) {
                  key1[i] = 0x00;
                }
                for (var i = 7; i < 16; i++) {
                  key1[i] = 0x00;
                }
                for (var i = 16; i < 22; i++) {
                  key1[i] = 0x00;
                }

                var key2 = new Array(22);
                for (var i = 0; i < 7; i++) {
                  key2[i] = leftcolor;
                }
                for (var i = 7; i < 16; i++) {
                  key2[i] = leftcolor;
                }
                for (var i = 16; i < 22; i++) {
                  key2[i] = leftcolor;
                }

                updating = true;
                if (updating2 == false){
                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [leftcolor, leftcolor, leftcolor, leftcolor, leftcolor]);
                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                  chromaSDK.createMouseEffect("CHROMA_STATIC", leftcolor);
                  setTimeout(function(){
                    if (updating2 == false){
                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                      setTimeout(function(){
                        if (updating2 == false){
                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [leftcolor, leftcolor, leftcolor, leftcolor, leftcolor]);
                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", leftcolor);
                          setTimeout(function(){
                            if (updating2 == false){
                              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                              setTimeout(function(){
                                if (updating2 == false){
                                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [leftcolor, leftcolor, leftcolor, leftcolor, leftcolor]);
                                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                                  chromaSDK.createMouseEffect("CHROMA_STATIC", leftcolor);
                                  setTimeout(function(){
                                    if (updating2 == false){
                                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                      chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                      setTimeout(function(){
                                        updating = false;
                                        updating3 = false;
                                        ingame = false;
                                      }, 200);
                                      }
                                    }, 200);
                                  }
                                }, 200);
                              }
                            }, 200);
                          }
                        }, 200);
                      }
                    }, 200);
                  }
                } else if (player == 2) {

                  var key1 = new Array(22);
                  for (var i = 0; i < 7; i++) {
                    key1[i] = 0x00;
                  }
                  for (var i = 7; i < 16; i++) {
                    key1[i] = 0x00;
                  }
                  for (var i = 16; i < 22; i++) {
                    key1[i] = 0x00;
                  }
                  var key2 = new Array(22);
                  for (var i = 0; i < 7; i++) {
                    key2[i] = rightcolor;
                  }
                    for (var i = 7; i < 16; i++) {
                      key2[i] = rightcolor;
                    }
                    for (var i = 16; i < 22; i++) {
                      key2[i] = rightcolor;
                    }
                    updating = true;
                    if(updating2 == false){
                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [rightcolor, rightcolor, rightcolor, rightcolor, rightcolor]);
                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                      setTimeout(function(){
                        if(updating2 == false){
                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                          setTimeout(function(){
                            if(updating2 == false){
                              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [rightcolor, rightcolor, rightcolor, rightcolor, rightcolor]);
                              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                              setTimeout(function(){
                                if(updating2 == false){
                                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                  chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                  setTimeout(function(){
                                    if(updating2 == false){
                                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [rightcolor, rightcolor, rightcolor, rightcolor, rightcolor]);
                                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                                      chromaSDK.createMouseEffect("CHROMA_STATIC", rightcolor);
                                      setTimeout(function(){
                                        if(updating2 == false){
                                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                          chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                          setTimeout(function(){
                                            updating = false;
                                            updating3 = false;
                                            ingame = false;
                                          }, 200);
                                        }
                                      }, 200);
                                    }
                                  }, 200);
                                }
                              }, 200);
                            }
                          }, 200);
                        }
                      }, 200);
                    }
                  }else {

                    var key1 = new Array(22);
                    for (var i = 0; i < 7; i++) {
                      key1[i] = 0x00;
                    }
                    for (var i = 7; i < 16; i++) {
                      key1[i] = 0x00;
                    }
                    for (var i = 16; i < 22; i++) {
                      key1[i] = 0x00;
                    }

                    var key2 = new Array(22);
                    for (var i = 0; i < 7; i++) {
                      key2[i] = 8355711;
                    }
                    for (var i = 7; i < 16; i++) {
                      key2[i] = 8355711;
                    }
                    for (var i = 16; i < 22; i++) {
                      key2[i] = 8355711;
                    }

                    updating = true;
                    if(updating2 == false){
                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [8355711, 8355711, 8355711, 8355711, 8355711]);
                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                      chromaSDK.createMouseEffect("CHROMA_STATIC", 8355711);
                      setTimeout(function(){
                        if(updating2 == false){
                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                          chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                          setTimeout(function(){
                            if(updating2 == false){
                              chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [8355711, 8355711, 8355711, 8355711, 8355711]);
                              chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                              chromaSDK.createMouseEffect("CHROMA_STATIC", 8355711);
                              setTimeout(function(){
                                if(updating2 == false){
                                  chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                                  chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                  chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                  setTimeout(function(){
                                    if(updating2 == false){
                                      chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [8355711, 8355711, 8355711, 8355711, 8355711]);
                                      chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key2, key2, key2, key2, key2, key2]);
                                      chromaSDK.createMouseEffect("CHROMA_STATIC", 8355711);
                                      setTimeout(function(){
                                        if(updating2 == false){
                                          chromaSDK.createChromaLinkEffect("CHROMA_CUSTOM", [00, 00, 00, 00, 00]);
                                          chromaSDK.createKeyboardEffect("CHROMA_CUSTOM_KEY", [key1, key1, key1, key1, key1, key1]);
                                          chromaSDK.createMouseEffect("CHROMA_STATIC", 00);
                                          setTimeout(function(){
                                            updating = false;
                                            updating3 = false;
                                            ingame = false;
                                          }, 200);
                                        }
                                      }, 200);
                                    }
                                  }, 200);
                                }
                              }, 200);
                            }
                          }, 200);
                        }
                      }, 200);
                    }
                  }
                }, 16);
                }












      var ws;
      var data;
      // Reconnection logic from: https://stackoverflow.com/a/23176223
      function connect() {
          ws = new WebSocket('ws://localhost:8080');
          ws.onopen = function () {
              // subscribe to some channels
              // ws.send(JSON.stringify({
              //.... some message the I must send when I connect ....
              // }));
              console.log("connected");
          };

          ws.onmessage = function (e) {
              console.log('Message:', e.data);
              data = JSON.parse(e.data);
              if (data.event == "start" || data.start) {
                ingame = true;
                leftcolor = data.leftcolor[0] + data.leftcolor[1] * 256 + data.leftcolor[2] * 65536;
                rightcolor = data.rightcolor[0] + data.rightcolor[1] * 256 + data.rightcolor[2] * 65536;
                piioleftcolor = data.leftcolor;
                piiorightcolor = data.rightcolor;
                if (data.event == "start") {
                  for (var i = 0; i <= 10; i++) {
                  changecolor(i);
                  }
                }
              } else if (data.start === false) {
                ingame = false;
              }
              if (data.event == "winner") {
                if (arraysEqual(data.player, piioleftcolor)) {
                  playerwon(1);
                }else if (arraysEqual(data.player, piiorightcolor)) {
                    playerwon(2);
                  } else {
                    playerwon(0);
                  }
                }
              if (data.event == "died") {
                if (arraysEqual(data.player, piioleftcolor) || arraysEqual(data.opponent, piiorightcolor)) {
                  playerdead(1);
                }else if (arraysEqual(data.player, piiorightcolor) || arraysEqual(data.opponent, piioleftcolor)) {
                    playerdead(2);
                  } else {
                    playerdead(0);
                  }

              }
          };

          ws.onclose = function (e) {
              console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
              setTimeout(function () {
                  connect();
              }, 2000);
          };

          ws.onerror = function (err) {
              console.error('Socket encountered error: ', err.message, 'Closing socket');
              ws.close();
          };
      }

      connect();
      function arraysEqual(a, b) {
        if (a === b) return true;
        if (a == null || b == null) return false;
        if (a.length != b.length) return false;

        // If you don't care about the order of the elements inside
        // the array, you should sort both arrays here.
        // Please note that calling sort on an array will modify that array.
        // you might want to clone your array first.

        for (var i = 0; i < a.length; ++i) {
          if (a[i] !== b[i]) return false;
        }
        return true;
      }
 function checkbox(checked){
  fs.writeFile('razer.txt', checked.toString(), function(err, result) {
     if(err) console.log('error', err);
   });
   if (checked) {

       chromaSDK.init();
   } else {
     chromaSDK.uninit();

   }
 }

        function changecolor(i){
          var time = 20 * i;
            setTimeout(function() {
              var x = (i/10);
              var red1 = Math.round(x * (piioleftcolor[0] - middlecolor[0])) + middlecolor[0];
              var green1 = (Math.round(x * (piioleftcolor[1] - middlecolor[1])) + middlecolor[1]);
              var blue1 = (Math.round(x * (piioleftcolor[2] - middlecolor[2])) + middlecolor[2]);
              var red2 = Math.round(x * (piiorightcolor[0] - middlecolor[0])) + middlecolor[0];
              var green2 = (Math.round(x * (piiorightcolor[1] - middlecolor[1])) + middlecolor[1]);
              var blue2 = (Math.round(x * (piiorightcolor[2] - middlecolor[2])) + middlecolor[2]);
              rightcolor = red2 + green2 * 256 + blue2 * 65536;
              leftcolor = red1 + green1 * 256 + blue1 * 65536;
            }, time);
        }



         fs.readFile('razer.txt', 'utf8', function (err, data) {
           if (data == "true") {
             document.getElementById("lol").checked = true;
             checkbox(true);
           } else {
             document.getElementById("lol").checked = false;
             checkbox(false);

           }
         });

         function folder(value){
           value = value.substr(0, value.lastIndexOf("\\"));
          folder = data;
          document.getElementById("span").textContent = value;
         fs.writeFile('folder.txt', value, function(err, result) {
         if(err) console.log('error', err);
         });
         }

         fs.readFile('folder.txt', 'utf8', function (err, data) {
            folder = data;
            document.getElementById("span").textContent = data;
        });

    </script>
  </head>
  <body onload="onPageLoad()" onunload="onPageUnload()" style="background-color: rgba(0, 0, 0, 0);color: white;">
    <center>
      <table style="width: 100%">
        <tr>
          <th style="width: 50%; font-weight: normal; vertical-align:top;">
            Inspect folder<br/>
            File Folder:<span id="span"></span><br/>
            <button><label for="saas">Change Folder</label></button><input type="file" id="saas" name="saas" webkitdirectory onchange="folder(this.files[0].path);" style="display: none;"/>
          </th>
          <th style="width: 50%; font-weight: normal; vertical-align:top;">
            Wii Relay
        </th>
        </tr>
      </table>
  <div style="width: 50%">
  </div>
    <input type="checkbox" name="" onclick="checkbox(this.checked);" id="lol">
    <span style="color: white;">Razer Chroma LED Toggle</span>
  </center>
  </body>
</html>
